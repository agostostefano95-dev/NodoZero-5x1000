
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Nodo Zero – 5x1000</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  background: linear-gradient(135deg, #f7ecda, #e2cdb3);
}

/* Logo centrato */
.top {
  text-align: center;
  margin-bottom: 25px;
}

.logo {
  width: 100px;
  margin-bottom: 10px;
}

/* Titolo */
.top-title {
  font-size: 26px;
  font-weight: 700;
  margin-bottom: 10px;
}

/* Testo descrittivo */
.description {
  font-size: 18px;
  line-height: 1.45;
  max-width: 700px;
  margin: 0 auto;
  text-align: center;
}

/* Scena */
.scene {
  margin-top: 40px;
  display: flex;
  justify-content: center;
  gap: 30px;
}

.characters img {
  width: 120px;
  display: block;
}

.balloons {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.balloon {
  background: #ffffffcc;
  padding: 15px;
  border-radius: 10px;
  max-width: 260px;
  font-size: 18px;
  backdrop-filter: blur(3px);
}

/* Divider fumettistico */
.comic-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 25px;
  gap: 10px;
}

.comic-divider .line {
  width: 120px;
  height: 3px;
  background: #333;
  border-radius: 2px;
}

.comic-divider .puff {
  font-size: 14px;
  letter-spacing: 3px;
  opacity: 0.7;
}

/* Bottoni stile fumetto */
.comic-button {
  font-size: 22px;
  text-decoration: none;
  font-weight: 700;
  color: #333;
  padding: 10px 20px;
  border: 3px solid #333;
  border-radius: 10px;
  background: #ffffffcc;
  box-shadow: 3px 3px 0 #333;
  transition: transform 0.1s ease;
  margin: 0 10px;
  cursor: pointer;
}

.comic-button:active {
  transform: translate(2px, 2px);
  box-shadow: 1px 1px 0 #333;
}

/* Contenitore scelta */
.choice {
  margin-top: 50px;
  text-align: center;
}

/* Riga con omino + balloon */
.choice-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 25px;
  margin-top: 20px;
}

/* Omino che indica */
.omino-f.png {
  width: 110px;
  transform: rotate(-6deg);
}

/* Contatore */
.counter {
  margin-top: 35px;
  font-size: 18px;
}

.counter-total {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 10px;
}

.counter-details {
  font-size: 18px;
}

/* Footer */
.footer-info {
  text-align: center;
  font-size: 14px;
  margin-top: 60px;
  color: #333;
  opacity: 0.8;
  line-height: 1.4;
}
</style>
</head>

<body>

<div class="top">
  <img src="logo-nodo-zero.PNG" alt="Nodo Zero" class="logo" />
  <div class="top-title">La nostra visione</div>
  <div class="description">
    Nodo Zero è un’associazione di promozione sociale che nasce per creare comunità, cura e possibilità nei piccoli territori.  
    Intrecciamo progettazione sociale, creatività narrativa e azioni concrete di supporto per rendere ogni luogo più accogliente, giusto e partecipato.  
    <br><br>
    Tra i nostri progetti c’è <strong>Aurora – Emporio Solidale</strong>, uno spazio che unisce dignità, mutualismo e bellezza: non solo distribuzione di beni, ma un punto di incontro dove sentirsi parte di qualcosa.  
    <br><br>
    In sintesi, siamo un laboratorio di comunità: un luogo dove le idee diventano gesti, e i gesti costruiscono appartenenza.
  </div>
</div>

<div class="scene">
  <div class="characters">
    <img src="omino-a.PNG" alt="Omino A" />
    <img src="omino-b.PNG" alt="Omino B" />
  </div>

  <div class="balloons">
    <div class="balloon a">
      “Ehi! Grazie per essere arrivato fin qui.”
    </div>
    <div class="balloon b">
      “Con il tuo 5x1000 puoi sostenere l’Emporio Solidale di Cocconato.”
    </div>
  </div>
</div>

<!-- SEZIONE SCELTA + CONTATORE -->
<div class="choice">

  <div class="comic-divider">
    <span class="puff">• • •</span>
    <span class="line"></span>
    <span class="puff">• • •</span>
  </div>

  <div style="font-size: 26px; font-weight: 700; margin-bottom: 25px;">
    Ogni gesto è un seme.
  </div>

  <div class="choice-row">
    <img src="omino-f.png" alt="Omino che indica" class="omino-f" />

    <div class="balloons">
      <div class="balloon">
        “Tu quale vuoi piantare?”
      </div>
    </div>
  </div>

  <div style="margin-top: 30px;">
    <button class="comic-button" id="btn-si">SÌ</button>
    <button class="comic-button" id="btn-no">NO</button>
  </div>

  <div class="counter">
    <div class="counter-total" id="totale">0</div>
    <div class="counter-details">
      <span id="si-count">SÌ: 0</span> • <span id="no-count">NO: 0</span>
    </div>
  </div>

</div>

<div class="footer-info">
  Nodo Zero APS<br>
  Sede legale: Strada Monferrato, 15A – Cocconato (AT) 14023<br>
  Codice fiscale: 92084260055
</div>

<!-- FIREBASE + LOGICA CONTATORE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBCfZbwBc_2pkL3nTFzVR1c2ZsAZo1yZ4s",
    authDomain: "nodozero-5x1000.firebaseapp.com",
    databaseURL: "https://nodozero-5x1000-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "nodozero-5x1000",
    storageBucket: "nodozero-5x1000.firebasestorage.app",
    messagingSenderId: "938885804680",
    appId: "1:938885804680:web:3ff76da61a24477b82253d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const scelteRef = ref(db, "scelte");

  // Aggiorna il contatore in tempo reale
  onValue(scelteRef, (snapshot) => {
    const data = snapshot.val() || {};
    const si = data.si || 0;
    const no = data.no || 0;
    document.getElementById("si-count").textContent = "SÌ: " + si;
    document.getElementById("no-count").textContent = "NO: " + no;
    document.getElementById("totale").textContent = si + no;
  });

  // Funzione per incrementare un valore (si/no)
  function incrementChoice(key) {
    const choiceRef = ref(db, "scelte/" + key);
    runTransaction(choiceRef, (current) => {
      return (current || 0) + 1;
    });
  }

  document.getElementById("btn-si").addEventListener("click", () => {
    incrementChoice("si");
  });

  document.getElementById("btn-no").addEventListener("click", () => {
    incrementChoice("no");
  });
</script>

</body>
</html>
